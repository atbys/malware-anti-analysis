#include <windows.h>
#include <tlhelp32.h>
#include <string>

#include <cstring>
#include <stdio.h>

bool check_process_is_running(const std::string &proc_name) {
    HANDLE hSnapshot;
    PROCESSENTRY32 pe = {};

    pe.dwSize = sizeof(pe);
    bool present = false;
    hSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);

    if (hSnapshot == INVALID_HANDLE_VALUE)
        return false;

    if (Process32First(hSnapshot, &pe)) {
        do {
            if (!std::strcmp(pe.szExeFile, proc_name.c_str())) {
                present = true;
                break;
            }
        } while (Process32Next(hSnapshot, &pe));
    }
    CloseHandle(hSnapshot);

    return present;
}

int main(){
    if(check_process_is_running("x32dbg.exe")){
        printf("Debugged.\n");
    }else{
        printf("Not Debugged.\n");
    }

    return 0;
}